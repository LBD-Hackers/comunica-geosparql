!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ifc-lbd"]={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a={},r={};Object.defineProperty(r,"__esModule",{value:!0}),r.BlankNode=void 0;r.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}};var n={},l={};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultGraph=void 0;class o{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}l.DefaultGraph=o,o.INSTANCE=new o;var i={},u={};Object.defineProperty(u,"__esModule",{value:!0}),u.NamedNode=void 0;u.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},Object.defineProperty(i,"__esModule",{value:!0}),i.Literal=void 0;const s=u;class d{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=d.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=d.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}i.Literal=d,d.RDF_LANGUAGE_STRING=new s.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),d.XSD_STRING=new s.NamedNode("http://www.w3.org/2001/XMLSchema#string");var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.Quad=void 0;p.Quad=class{constructor(e,t,a,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=a,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.Variable=void 0;c.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},Object.defineProperty(n,"__esModule",{value:!0}),n.DataFactory=void 0;const v=r,f=l,h=i,N=u,y=p,m=c;let g=0;var b;n.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${g++}_`}namedNode(e){return new N.NamedNode(e)}blankNode(e){return new v.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new h.Literal(e,t)}variable(e){return new m.Variable(e)}defaultGraph(){return f.DefaultGraph.INSTANCE}quad(e,t,a,r){return new y.Quad(e,t,a,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(h.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},function(e){var a=t&&t.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),o=t&&t.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r,e),o(n,e),o(l,e),o(i,e),o(u,e),o(p,e),o(c,e)}(a),function(e){e.POINT="point",e.POINTZ="pointz",e.POLYGON="polygon",e.POLYGONZ="polygonz",e.UNKNOWN="unknown"}(b||(b={}));var T={point:b.POINT,pointz:b.POINTZ,polygon:b.POLYGON,polygonz:b.POLYGONZ};function O(e){var t=function(e){var t=(e=e.toLocaleLowerCase()).split("(")[0];if(t=t.replace(/\s+/,""),-1!=Object.keys(T).indexOf(t))return T[t];return b.UNKNOWN}(e);if(t==b.POINT||t==b.POINTZ){var a=function(e){return w(e.split("(")[1].split(")")[0].trim())}(e);return{value:a,type:t}}if(t==b.POLYGON){var r=function(e){var t=[];if(2==e.split("(").length){e.split("(")[1].split(")")[0].trim().split(",").map((function(e){e=e.trim(),t.push(w(e))}))}else console.log(e),console.log("Non-donut not yet supported!!");return t}(e);return{value:r,type:t}}}function w(e){return e.split(" ").map((function(e){return parseFloat(e)}))}var P={exports:{}},_=function(e,t,a,r){var n=e[0],l=e[1],o=!1;void 0===a&&(a=0),void 0===r&&(r=t.length);for(var i=(r-a)/2,u=0,s=i-1;u<i;s=u++){var d=t[a+2*u+0],p=t[a+2*u+1],c=t[a+2*s+0],v=t[a+2*s+1];p>l!=v>l&&n<(c-d)*(l-p)/(v-p)+d&&(o=!o)}return o},L=function(e,t,a,r){var n=e[0],l=e[1],o=!1;void 0===a&&(a=0),void 0===r&&(r=t.length);for(var i=r-a,u=0,s=i-1;u<i;s=u++){var d=t[u+a][0],p=t[u+a][1],c=t[s+a][0],v=t[s+a][1];p>l!=v>l&&n<(c-d)*(l-p)/(v-p)+d&&(o=!o)}return o};P.exports=function(e,t,a,r){return t.length>0&&Array.isArray(t[0])?L(e,t,a,r):_(e,t,a,r)},P.exports.nested=L,P.exports.flat=_;var G=P.exports,j=new a.DataFactory,I={"http://www.opengis.net/def/function/geosparql/distance":function(e){var t=null!=e[2]?parseFloat(e[2].value):8,a=null!=e[3]?parseFloat(e[3].value):1;if("Literal"===e[0].termType&&"Literal"===e[1].termType){var r=O(e[0].value),n=O(e[1].value);if(r&&n&&r.value&&n.value){var l,o=r.value[0]-n.value[0],i=r.value[1]-n.value[1];if(r.type==b.POINT&&n.type==b.POINT&&(l=Math.sqrt(o*o+i*i)),r.type==b.POINTZ&&n.type==b.POINTZ){var u=r.value[2]-n.value[2];l=Math.sqrt(o*o+i*i+u*u)}return l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(e*Math.pow(10,t)+Number.EPSILON)/Math.pow(10,t)}(l*=a,t),j.literal(l.toString(),j.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))}}return j.literal("ERROR")},"http://www.opengis.net/def/function/geosparql/inside":function(e){if(null==e[2]||parseFloat(e[2].value),"Literal"===e[0].termType&&"Literal"===e[1].termType){var t=O(e[0].value),a=O(e[1].value);if(t&&a&&t.value&&a.value.length&&a.type==b.POLYGON){var r=a.value,n=t.value;t.type==b.POINTZ&&n.pop();var l=G(n,r);return j.literal(l.toString(),j.namedNode("http://www.w3.org/2001/XMLSchema#boolean"))}}return j.literal("ERROR")}};e.geoSPARQLFunctions=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=bundle.umd.min.js.map
