var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={},a={};Object.defineProperty(a,"__esModule",{value:!0}),a.BlankNode=void 0;a.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}};var r={},l={};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}l.DefaultGraph=n,n.INSTANCE=new n;var o={},u={};Object.defineProperty(u,"__esModule",{value:!0}),u.NamedNode=void 0;u.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},Object.defineProperty(o,"__esModule",{value:!0}),o.Literal=void 0;const i=u;class s{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=s.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=s.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}o.Literal=s,s.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),s.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string");var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.Quad=void 0;d.Quad=class{constructor(e,t,a,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=a,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.Variable=void 0;p.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},Object.defineProperty(r,"__esModule",{value:!0}),r.DataFactory=void 0;const v=a,h=l,c=o,f=u,N=d,y=p;let m=0;var g,T,b,O;r.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${m++}_`}namedNode(e){return new f.NamedNode(e)}blankNode(e){return new v.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new c.Literal(e,t)}variable(e){return new y.Variable(e)}defaultGraph(){return h.DefaultGraph.INSTANCE}quad(e,t,a,r){return new N.Quad(e,t,a,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(c.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},g=t,T=e&&e.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),b=e&&e.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||T(t,e,a)},Object.defineProperty(g,"__esModule",{value:!0}),b(a,g),b(r,g),b(l,g),b(o,g),b(u,g),b(d,g),b(p,g),function(e){e.POINT="point",e.POINTZ="pointz",e.POLYGON="polygon",e.POLYGONZ="polygonz",e.UNKNOWN="unknown"}(O||(O={}));var w={point:O.POINT,pointz:O.POINTZ,polygon:O.POLYGON,polygonz:O.POLYGONZ};function P(e){var t=function(e){var t=(e=e.toLocaleLowerCase()).split("(")[0];if(t=t.replace(/\s+/,""),-1!=Object.keys(w).indexOf(t))return w[t];return O.UNKNOWN}(e);if(t==O.POINT||t==O.POINTZ){var a=function(e){return _(e.split("(")[1].split(")")[0].trim())}(e);return{value:a,type:t}}if(t==O.POLYGON){var r=function(e){var t=[];if(2==e.split("(").length){e.split("(")[1].split(")")[0].trim().split(",").map((function(e){e=e.trim(),t.push(_(e))}))}else console.log(e),console.log("Non-donut not yet supported!!");return t}(e);return{value:r,type:t}}}function _(e){return e.split(" ").map((function(e){return parseFloat(e)}))}var L={exports:{}},G=function(e,t,a,r){var l=e[0],n=e[1],o=!1;void 0===a&&(a=0),void 0===r&&(r=t.length);for(var u=(r-a)/2,i=0,s=u-1;i<u;s=i++){var d=t[a+2*i+0],p=t[a+2*i+1],v=t[a+2*s+0],h=t[a+2*s+1];p>n!=h>n&&l<(v-d)*(n-p)/(h-p)+d&&(o=!o)}return o},j=function(e,t,a,r){var l=e[0],n=e[1],o=!1;void 0===a&&(a=0),void 0===r&&(r=t.length);for(var u=r-a,i=0,s=u-1;i<u;s=i++){var d=t[i+a][0],p=t[i+a][1],v=t[s+a][0],h=t[s+a][1];p>n!=h>n&&l<(v-d)*(n-p)/(h-p)+d&&(o=!o)}return o};L.exports=function(e,t,a,r){return t.length>0&&Array.isArray(t[0])?j(e,t,a,r):G(e,t,a,r)},L.exports.nested=j,L.exports.flat=G;var I=L.exports,q=new t.DataFactory,S={"http://www.opengis.net/def/function/geosparql/distance":function(e){var t=null!=e[2]?parseFloat(e[2].value):8,a=null!=e[3]?parseFloat(e[3].value):1;if("Literal"===e[0].termType&&"Literal"===e[1].termType){var r=P(e[0].value),l=P(e[1].value);if(r&&l&&r.value&&l.value){var n,o=r.value[0]-l.value[0],u=r.value[1]-l.value[1];if(r.type==O.POINT&&l.type==O.POINT&&(n=Math.sqrt(o*o+u*u)),r.type==O.POINTZ&&l.type==O.POINTZ){var i=r.value[2]-l.value[2];n=Math.sqrt(o*o+u*u+i*i)}return n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(e*Math.pow(10,t)+Number.EPSILON)/Math.pow(10,t)}(n*=a,t),q.literal(n.toString(),q.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))}}return q.literal("ERROR")},"http://www.opengis.net/def/function/geosparql/inside":function(e){if(null==e[2]||parseFloat(e[2].value),"Literal"===e[0].termType&&"Literal"===e[1].termType){var t=P(e[0].value),a=P(e[1].value);if(t&&a&&t.value&&a.value.length&&a.type==O.POLYGON){var r=a.value,l=t.value;t.type==O.POINTZ&&l.pop();var n=I(l,r);return q.literal(n.toString(),q.namedNode("http://www.w3.org/2001/XMLSchema#boolean"))}}return q.literal("ERROR")}};export{S as geoSPARQLFunctions};
//# sourceMappingURL=bundle.esm.min.js.map
