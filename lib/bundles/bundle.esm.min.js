var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t={},a={};Object.defineProperty(a,"__esModule",{value:!0}),a.BlankNode=void 0;a.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}};var r={},i={};Object.defineProperty(i,"__esModule",{value:!0}),i.DefaultGraph=void 0;class o{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}i.DefaultGraph=o,o.INSTANCE=new o;var l={},n={};Object.defineProperty(n,"__esModule",{value:!0}),n.NamedNode=void 0;n.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},Object.defineProperty(l,"__esModule",{value:!0}),l.Literal=void 0;const s=n;class u{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=u.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=u.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}l.Literal=u,u.RDF_LANGUAGE_STRING=new s.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),u.XSD_STRING=new s.NamedNode("http://www.w3.org/2001/XMLSchema#string");var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.Quad=void 0;d.Quad=class{constructor(e,t,a,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=a,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.Variable=void 0;c.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},Object.defineProperty(r,"__esModule",{value:!0}),r.DataFactory=void 0;const p=a,h=i,f=l,v=n,m=d,N=c;let y=0;var b,w,T,g;function _(e){if((e=e.toLocaleLowerCase()).startsWith("point")){var t=function(e){return e.split("(")[1].split(")")[0].trim().split(" ").map((function(e){return parseFloat(e)}))}(e);return{coordinates:t,type:g.POINT}}}r.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${y++}_`}namedNode(e){return new v.NamedNode(e)}blankNode(e){return new p.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new f.Literal(e,t)}variable(e){return new N.Variable(e)}defaultGraph(){return h.DefaultGraph.INSTANCE}quad(e,t,a,r){return new m.Quad(e,t,a,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(f.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},b=t,w=e&&e.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),T=e&&e.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||w(t,e,a)},Object.defineProperty(b,"__esModule",{value:!0}),T(a,b),T(r,b),T(i,b),T(l,b),T(n,b),T(d,b),T(c,b),function(e){e.POINT="point"}(g||(g={}));var O=new t.DataFactory,P={"http://www.opengis.net/def/function/geosparql/distance":function(e){var t=null!=e[2]?parseFloat(e[2].value):8;if("Literal"===e[0].termType&&"Literal"===e[1].termType){var a=_(e[0].value),r=_(e[1].value);if(a&&r&&a.type==g.POINT&&r.type==g.POINT){var i=a.coordinates[0]-r.coordinates[0],o=a.coordinates[1]-r.coordinates[1],l=a.coordinates[2]-r.coordinates[2],n=j(Math.sqrt(i*i+o*o+l*l),t);return O.literal(n.toString(),O.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))}}return O.literal("ERROR")},"http://www.opengis.net/def/function/geosparql/inside":function(e){var t=null!=e[2]?parseFloat(e[2].value):8;if("Literal"===e[0].termType&&"Literal"===e[1].termType){var a=_(e[0].value),r=_(e[1].value);if(a&&r&&a.type==g.POINT&&r.type==g.POINT){var i=a.coordinates[0]-r.coordinates[0],o=a.coordinates[1]-r.coordinates[1],l=a.coordinates[2]-r.coordinates[2],n=j(Math.sqrt(i*i+o*o+l*l),t);return O.literal(n.toString(),O.namedNode("http://www.w3.org/2001/XMLSchema#decimal"))}}return O.literal("ERROR")}};function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(e*Math.pow(10,t)+Number.EPSILON)/Math.pow(10,t)}export{P as geoSPARQLFunctions};
//# sourceMappingURL=bundle.esm.min.js.map
